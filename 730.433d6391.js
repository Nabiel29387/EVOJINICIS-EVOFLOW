"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[730],{2730:function(e,t,s){s.d(t,{Z:function(){return F}});var a=function(){var e=this,t=e._self._c;return t("v-slide-y-transition",{attrs:{name:"u-contact",mode:"out-in"}},[e.status.isCurUserPending?t("div",{staticStyle:{width:"100%","text-align":"center",padding:"30px"}},[t("ga-spinner"),t("h3",[e._v("Loading...")])],1):t("div",[t("v-form",{ref:"form",staticClass:"u-form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("UserFormHeader",{attrs:{"form-data":e.formData}}),t("UserFormNewCredentials",{attrs:{newCredentials:e.newCredentials}}),e.roleUsers?t("UserFormAdmin",{attrs:{"form-data":e.formData},on:{updateDist:e.updateDist}}):e._e(),e.formData.defaults?t("UserFormDefaults",{attrs:{"form-data":e.formData}}):e._e(),t("UserFormContact",{attrs:{"form-data":e.formData}}),t("UserFormPass",{attrs:{"form-data":e.formData}})],1),t("div",{staticStyle:{width:"100%"}},[t("contextNav",{staticStyle:{"justify-content":"center"},attrs:{buttons:e.buttons,vertical:!0,fixed:!0},on:{pushToggle:e.handleButtonAction}})],1)],1)])},r=[],i=s(629),o=function(){var e=this,t=e._self._c;return t("v-slide-y-transition",{attrs:{name:"u-contact",mode:"out-in"}},[e.formData._id?t("div",{staticClass:"u-card u-admin",staticStyle:{width:"100%"}},[t("h3",{staticStyle:{"text-align":"center"}},[e._v(" Settings For: "+e._s(e.formData.username)+" ")]),t("h1",{staticStyle:{"text-align":"center"}},[e._v(" "+e._s(e.formData.displayName)+" ")])]):t("div",{staticClass:"u-card u-admin"},[t("h2",[e._v("Create New User")]),t("v-text-field",{attrs:{rules:[e=>!!e||"Required"],counter:30,disabled:void 0!==e.formData._id,label:"User Name",required:""},model:{value:e.formData.username,callback:function(t){e.$set(e.formData,"username",t)},expression:"formData.username"}})],1)])},n=[],l={props:{formData:{type:Object,required:!0}}},d=l,u=s(1001),c=(0,u.Z)(d,o,n,!1,null,null,null),m=c.exports,h=function(){var e=this,t=e._self._c;return t("v-slide-y-transition",{attrs:{name:"u-contact",mode:"out-in"}},[t("div",{staticClass:"u-card u-contact"},[t("h2",[e._v("Defaults / Settings")]),t("v-select",{attrs:{label:"Default ISOTEK Product Type",items:e.productDefaultOptions,dense:""},model:{value:e.formData.defaults.product,callback:function(t){e.$set(e.formData.defaults,"product",t)},expression:"formData.defaults.product"}}),t("v-radio-group",{model:{value:e.formData.defaults.advanceOptions,callback:function(t){e.$set(e.formData.defaults,"advanceOptions",t)},expression:"formData.defaults.advanceOptions"}},[t("h4",[e._v("Show Advance Options By Default?")]),t("v-radio",{attrs:{color:"primary",value:!1,label:"Keep it simple, hide it"}}),t("v-radio",{attrs:{color:"primary",value:!0,label:"I like data, show it"}})],1),t("v-radio-group",{model:{value:e.formData.defaults.quoteSaved,callback:function(t){e.$set(e.formData.defaults,"quoteSaved",t)},expression:"formData.defaults.quoteSaved"}},[t("h4",[e._v("After New Quote is Saved")]),t("v-radio",{attrs:{color:"primary",value:"stay",label:"Stay on the Estimator page"}}),t("v-radio",{attrs:{color:"primary",value:"list",label:"Back to my Quote List"}})],1)],1)])},f=[],p={props:{formData:{type:Object,required:!0}},data(){return{productDefaultOptions:[{text:"Start With no Selection",value:""},{text:"Manual PN Entry",value:"pasteAny"},{text:"Full Kit",value:"ik_kit"},{text:"Gasket Only",value:"ik_gasket"},{text:"Sleeve & Washer Set",value:"ik_swSet"}]}}},v=p,D=(0,u.Z)(v,h,f,!1,null,null,null),w=D.exports,b=function(){var e=this,t=e._self._c;return t("v-slide-y-transition",{attrs:{name:"u-contact",mode:"out-in"}},[t("div",{staticClass:"u-card u-contact"},[t("h2",[e._v("Contact Information")]),t("v-text-field",{attrs:{rules:[e=>!!e||"Required"],counter:30,label:"Display Name",required:""},model:{value:e.formData.displayName,callback:function(t){e.$set(e.formData,"displayName",t)},expression:"formData.displayName"}}),t("v-text-field",{attrs:{rules:[e=>!!e||"Required"],counter:40,label:"Email",required:""},model:{value:e.formData.email,callback:function(t){e.$set(e.formData,"email",t)},expression:"formData.email"}}),t("v-text-field",{attrs:{rules:[e=>!!e||"Required"],counter:15,label:"Primary Phone Number"},model:{value:e.formData.phone.primary,callback:function(t){e.$set(e.formData.phone,"primary",t)},expression:"formData.phone.primary"}}),t("v-text-field",{attrs:{counter:15,label:"Alternative Phone Number"},model:{value:e.formData.phone.alternative,callback:function(t){e.$set(e.formData.phone,"alternative",t)},expression:"formData.phone.alternative"}}),t("v-text-field",{attrs:{counter:40,label:"Address Line 1"},model:{value:e.formData.address.line1,callback:function(t){e.$set(e.formData.address,"line1",t)},expression:"formData.address.line1"}}),t("v-text-field",{attrs:{counter:40,label:"Address Line 2"},model:{value:e.formData.address.line2,callback:function(t){e.$set(e.formData.address,"line2",t)},expression:"formData.address.line2"}})],1)])},_=[],g={props:{formData:{type:Object,required:!0}}},U=g,C=(0,u.Z)(U,b,_,!1,null,null,null),P=C.exports,x=function(){var e=this,t=e._self._c;return t("v-slide-y-transition",{attrs:{name:"u-contact",mode:"out-in"}},[e.roleUsers?t("div",{staticClass:"u-card u-admin"},[t("h2",[e._v("Admin Only Settings")]),t("v-select",{attrs:{label:"Branch / Distributor",items:e.distSelection,rules:[e=>!!e||"Access level is required"],disabled:!e.isDev&&""!==e.editDistTag,required:""},model:{value:e.dist,callback:function(t){e.dist=t},expression:"dist"}}),t("v-select",{attrs:{label:"Pricing Structure",items:["DIST","LIST","SUG","LAMONS","ADMIN"],rules:[e=>!!e||"Access level is required"],disabled:"",required:""},model:{value:e.formData.pricing,callback:function(t){e.$set(e.formData,"pricing",t)},expression:"formData.pricing"}}),t("v-select",{attrs:{label:"Additional Roles",items:e.rolesList,disabled:!e.isDev,multiple:"",chips:""},model:{value:e.formData.roles,callback:function(t){e.$set(e.formData,"roles",t)},expression:"formData.roles"}}),t("v-select",{attrs:{label:"Account Status",disabled:!e.roleUsers,items:["active","inactive","terminated","duplicate","incorrect"]},model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}})],1):e._e()])},y=[],S={props:{formData:{type:Object,required:!0}},created(){0===this.distSelection.length&&this.$store.dispatch("dist/getDistList"),(!this.rolesList||this.rolesList.length<=1)&&this.$store.dispatch("users/listRoles")},computed:{...(0,i.rn)("dist",["editDistTag"]),isDev(){return this.$store.getters["account/isDev"]},roleUsers(){return this.$store.getters["account/roleUsers"]},distSelection(){return this.$store.getters["dist/distSelection"]},rolesList(){return this.$store.getters["users/rolesList"]},dist:{get(){return this.formData.dist},set(e){this.$emit("updateDist",e)}}}},k=S,N=(0,u.Z)(k,x,y,!1,null,null,null),$=N.exports,A=s(6695),q=s(2411),R={components:{UserFormHeader:m,UserFormDefaults:w,UserFormContact:P,UserFormAdmin:$,UserFormPass:A.Z,UserFormNewCredentials:q.Z},props:{formShowAlways:{type:Boolean,default:null}},data(){return{formData:{},valid:!1}},watch:{curUser_id:{handler:"setFormData",immediate:!0},editDistTag:{handler:"updateDist",immediate:!0},"formData.dist":{handler:"setDistDefaults",immediate:!0}},computed:{status(){return this.$store.getters["users/status"]},curUser_id(){return this.$store.getters["users/curUser_id"]},newCredentials(){return this.$store.getters["users/newCredentials"]},buttons(){const e=[];if(this.formHasNoChanges)e.push({icon:"save",disableText:"No Changes",disableColor:"black",disable:!0});else{let t="Create a User",s="createUser",a="primary";""!==this.curUser_id&&(t="Update the User",s="updateUser",a="green"),e.push({text:t,icon:"save",color:a,action:s,disable:!this.valid,disableText:"Missing required fields"})}return null!==this.formShowAlways?(this.formShowAlways||e.push({text:"Back to the List",icon:"arrow_back",color:"gray",small:!0,action:"close"}),this.curUser_id&&e.push({text:"User's Profile",icon:"person",color:"gray",small:!0,to:{path:`user/${this.curUser_id}`}})):this.roleUsers&&e.push({text:"Back to User List",icon:"arrow_back",color:"gray",small:!0,to:{path:"/users"}}),e},...(0,i.rn)("account",["user"]),...(0,i.Se)("users",["curUser"]),...(0,i.Se)("account",["isDev","roleUsers","auth_id"]),...(0,i.rn)("dist",["editDistTag"]),...(0,i.Se)("dist",["distDetails"]),formHasNoChanges(){for(const e in this.curUser)if("roles"===e){const t=this.curUser[e]||[],s=this.formData[e]||[];if(t.sort().toString()!==s.sort().toString())return!1}else if("object"===typeof this.curUser[e]){for(const t in this.curUser[e])if(this.curUser[e][t]!==this.formData[e][t])return!1}else if(this.curUser[e]!==this.formData[e])return!1;return!0}},methods:{setFormData(){this.formData=JSON.parse(JSON.stringify(this.curUser)),this.updateDist(this.formData.dist)},...(0,i.nv)("users",["updateUser","createUser"]),setDistDefaults(){if(""!==this.formData.dist){const e=this.distDetails(this.formData.dist);e&&(this.formData.pricing=e.pricing,this.formData.phone.alternative=e.phone,this.formData.address=e.address)}},updateDist(e){""!==this.editDistTag?this.formData.dist=this.editDistTag:""!==e&&(this.formData.dist=e),this.setDistDefaults()},handleButtonAction(e){"close"===e?this.$emit("handleButtonAction","formUserShow"):"updateUser"===e?this.updateUser({data:this.formData}):"createUser"===e&&this.createUser({data:this.formData})}}},L=R,O=(0,u.Z)(L,a,r,!1,null,null,null),F=O.exports},2411:function(e,t,s){s.d(t,{Z:function(){return d}});var a=function(){var e=this,t=e._self._c;return null!==e.newCredentials?t("v-slide-y-transition",{attrs:{name:"u-newCredentials",mode:"out-in"}},[t("div",{staticStyle:{margin:"0px 20px",padding:"10px 20px",border:"solid 4px green"}},[e._v(" New Login Information for"),t("br"),t("b",[e._v(e._s(e.newCredentials.displayName))]),t("br"),e._v(" username: "),t("b",[e._v(e._s(e.newCredentials.username))]),t("br"),e._v(" password: "),t("b",[e._v(e._s(e.newCredentials.newPassword))]),t("br"),t("br"),e._v(" email: "),t("b",[e._v(e._s(e.newCredentials.email))]),t("br")])]):e._e()},r=[],i={props:{newCredentials:{type:Object,default:null}}},o=i,n=s(1001),l=(0,n.Z)(o,a,r,!1,null,null,null),d=l.exports},6695:function(e,t,s){s.d(t,{Z:function(){return u}});var a=function(){var e=this,t=e._self._c;return t("v-slide-y-transition",{attrs:{name:"u-contact",mode:"out-in"}},[t("div",{staticClass:"u-card"},[e.passChangeSuccess?t("APgShade",{attrs:{type:"logout",text:"PASSWORD CHANGED"}}):e._e(),e.curUser_id&&e.curUser_id===e.auth_id?t("div",{staticClass:"u-password"},[t("h2",[e._v("Change My Password")]),t("v-text-field",{attrs:{label:"Old Password",type:"password",required:""},on:{focus:function(t){e.passChange.error=""}},model:{value:e.oldPass,callback:function(t){e.oldPass=t},expression:"oldPass"}}),t("v-text-field",{attrs:{label:"New Password",type:"password",required:""},model:{value:e.newPass,callback:function(t){e.newPass=t},expression:"newPass"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.newPass&&!e.miniPass,expression:"newPass && !miniPass"}]},[t("h3",{class:e.passLetter?"pass":"fail"},[e._v("At least 1 lowercase")]),t("h3",{class:e.passCapital?"pass":"fail"},[e._v("At least 1 capital")]),t("h3",{class:e.passNumber?"pass":"fail"},[e._v("At least 1 number")]),t("h3",{class:e.passLength?"pass":"fail"},[e._v("Minimum 6 characters")]),t("h3",{class:e.passIsDiff?"pass":"fail"},[e._v("Not the same as old one")])]),t("v-text-field",{attrs:{rules:[e.passwordsMatch||"Passwords do not match"],label:"Confirm New Password",type:"password",required:""},model:{value:e.newConf,callback:function(t){e.newConf=t},expression:"newConf"}}),t("h3",{directives:[{name:"show",rawName:"v-show",value:e.passChange.error,expression:"passChange.error"}],staticStyle:{color:"red"}},[e._v(" Incorrect Old Password ")]),t("v-btn",{attrs:{disabled:!e.validPassword,loading:e.updating},on:{click:e.updatePassword}},[e._v(" Change My Password ")])],1):e._e(),e.roleUsers&&e.curUser._id&&e.curUser._id!==e.auth_id?t("div",{staticClass:"u-admin"},[t("h2",[e._v("Password Reset")]),t("v-switch",{attrs:{color:"red",label:(e.enablePasswordReset?"Disable":"Enable")+" Password Reset"},model:{value:e.enablePasswordReset,callback:function(t){e.enablePasswordReset=t},expression:"enablePasswordReset"}}),t("v-btn",{staticClass:"error",attrs:{disabled:!e.enablePasswordReset},on:{click:function(t){return e.passwordReset({user_id:e.curUser._id})}}},[e._v(" Reset Password ")]),t("UserFormNewCredentials",{attrs:{newCredentials:e.newCredentials}})],1):e._e()],1)])},r=[],i=s(2411),o={components:{UserFormNewCredentials:i.Z},data(){return{enablePasswordReset:!1,oldPass:"",newPass:"",newConf:""}},watch:{curUser_id:{handler:"clearPassWordReset",immediate:!0}},computed:{status(){return this.$store.getters["users/status"]},updating(){return this.status.isCurUserPending},curUser(){return this.$store.getters["users/curUser"]},curUser_id(){return this.$store.getters["users/curUser_id"]},passChange(){return this.$store.getters["users/passChange"]},newCredentials(){return this.$store.getters["users/newCredentials"]},auth_id(){return this.$store.getters["account/auth_id"]},roleUsers(){return this.$store.getters["account/roleUsers"]},passwordsMatch(){return(""===this.oldPass||""!==this.newPass&&""!==this.newConf)&&this.newPass===this.newConf},validPassword(){return this.passwordsMatch&&""!==this.oldPass},passChangeError(){return""===this.passChange.error},passChangeSuccess(){return this.passChange.success},passLength(){return this.newPass.length>=6},passCapital(){return/[A-Z]/.test(this.newPass)},passLetter(){return/[a-z]/.test(this.newPass)},passNumber(){return/\d/.test(this.newPass)},passIsDiff(){return this.oldPass!==this.newPass},miniPass(){return this.passLength&&this.passCapital&&this.passLetter&&this.passNumber&&this.passIsDiff}},methods:{clearPassWordReset(){this.enablePasswordReset=!1},updatePassword(){const e={_id:this.auth_id,oldPassword:this.oldPass,password:this.newPass};this.$store.dispatch("users/updateUser",{data:e})},passwordReset(){this.$store.dispatch("users/passwordReset",{user_id:this.curUser._id})}}},n=o,l=s(1001),d=(0,l.Z)(n,a,r,!1,null,"65e50078",null),u=d.exports}}]);
//# sourceMappingURL=730.433d6391.js.map